import{a as st}from"./chunk-HFVOGKFC.js";import{A as ot,B as it,C as rt,a as I,d as qe,e as He,f as Ke,g as $e,l as Ze,m as Je,r as Qe,s as Ye,t as Xe,u as et,y as tt,z as nt}from"./chunk-OHS5TTPU.js";import{a as ze}from"./chunk-YDW3WTEL.js";import{$ as _,$a as we,A as l,C as Q,Cb as je,D as Y,E as X,Ea as ce,F as ee,Fa as V,Gb as Ue,H as te,Hb as Ve,I as N,Ja as le,Jb as Ge,K as f,Ka as me,L as T,La as de,Lb as Le,M as ne,Ma as ue,Mb as We,Oa as ge,Ob as Be,P as R,Pa as he,Q as oe,R as D,Ra as fe,S as w,Sa as Ce,Ta as Oe,V as ie,Wa as ve,Xa as be,Ya as Pe,Z as p,Za as Me,_ as m,ab as _e,b as B,c as z,ca as re,cb as ye,d as S,da as F,db as Ee,e as q,ea as j,f as u,h as H,i as x,ib as Se,j as k,jb as Te,ka as U,kb as Ie,l as A,m as O,ma as se,mb as xe,n as P,nb as ke,ob as Ae,p as g,pa as ae,q as K,qb as Ne,r as $,sb as Re,t as M,tb as De,ua as pe,ub as Fe,v as Z,x as h,z as J}from"./chunk-44MH6WD3.js";import"./chunk-ZTRS6MQZ.js";import"./chunk-7AA6B6AB.js";import"./chunk-WAVX4AJH.js";import"./chunk-G67DLYCP.js";import"./chunk-G3CV3VGG.js";import"./chunk-IEY6ZC2G.js";import"./chunk-MNDBORQJ.js";import"./chunk-7QVI4S4L.js";import"./chunk-4U6PRYVA.js";import"./chunk-6BZ4INXC.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as W,g as b}from"./chunk-LNJ3S2LQ.js";var L=(()=>{let t=class t{constructor(n,o){this.compteService=n,this.router=o}canActivate(n,o){return this.compteService.isAgent?!0:(this.router.navigate(["/accueil"]),!1)}};t.\u0275fac=function(o){return new(o||t)(l(I),l(he))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var at=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"folder/:id",loadComponent:()=>import("./chunk-XWG7PLYU.js").then(e=>e.FolderPage)},{path:"login",loadComponent:()=>import("./chunk-UVRGNHQA.js").then(e=>e.LoginPage)},{path:"inscription",loadComponent:()=>import("./chunk-3XWXVSPR.js").then(e=>e.InscriptionPage)},{path:"inscription/verification-email",loadComponent:()=>import("./chunk-IYJA7KI2.js").then(e=>e.VerificationEmailPage)},{path:"inscription/create-password",loadComponent:()=>import("./chunk-6G7IW62Q.js").then(e=>e.CreatePasswordPage)},{path:"accueil",loadComponent:()=>import("./chunk-GWBGDT6V.js").then(e=>e.AccueilPage)},{path:"accueil/quiz/:id",loadComponent:()=>import("./chunk-WJPJE3JM.js").then(e=>e.QuizPage)},{path:"partie/:id",loadComponent:()=>import("./chunk-FD6W2YJD.js").then(e=>e.PartiePage)},{path:"profile",loadComponent:()=>import("./chunk-DN2RDCOH.js").then(e=>e.CompteProfilePage)},{path:"modifier/compte",loadComponent:()=>import("./chunk-UP747LFQ.js").then(e=>e.UpdateInfosPage)},{path:"modifier/password",loadComponent:()=>import("./chunk-HYG4MFJQ.js").then(e=>e.UpdatePasswordPage)},{path:"transactions/depot",loadComponent:()=>import("./chunk-V3MPEK22.js").then(e=>e.DepotPage)},{path:"transactions/retrait",loadComponent:()=>import("./chunk-A3QMZIL2.js").then(e=>e.RetraitPage)},{path:"transactions/agent/depot",canActivate:[L],loadComponent:()=>import("./chunk-2DZ2NOTT.js").then(e=>e.DepotAgentPage)},{path:"transactions/agent/retrait",canActivate:[L],loadComponent:()=>import("./chunk-SIXTMBBH.js").then(e=>e.RetraitAgentPage)},{path:"accueil/quiz-terminer/:id",loadComponent:()=>import("./chunk-U6WFMETG.js").then(e=>e.QuizTerminerPage)},{path:"forget-password",loadComponent:()=>import("./chunk-4FOOPS2O.js").then(e=>e.ForgetPasswordPage)},{path:"forget-password/change-password",loadComponent:()=>import("./chunk-53UOEZVC.js").then(e=>e.ChangerPasswordPage)}];var gt=()=>[0,.5,.85];function ht(e,t){e&1&&(p(0,"ion-button",6),_(1,"ion-spinner"),m())}function ft(e,t){e&1&&(p(0,"ion-button",7)(1,"ion-text"),U(2,"Valide"),m()())}function Ct(e,t){if(e&1){let s=re();p(0,"ion-content")(1,"form",4),F("submit",function(){Y(s);let o=j();return X(o.onSubmit())}),p(2,"ion-grid")(3,"ion-row")(4,"ion-col"),U(5),m()(),p(6,"ion-row")(7,"ion-col"),_(8,"ion-input",5),m()(),p(9,"ion-col"),R(10,ht,2,0,"ion-button",6)(11,ft,3,0,"ion-button",7),m()()()()}if(e&2){let s=j();f(),w("formGroup",s.formGroup),f(4),se(" ",s.messageModal," "),f(5),ie(s.isLoading?10:11)}}var pt=(()=>{let t=class t{constructor(n,o,i){this.modalCtrl=n,this.webSocketService=o,this.compteService=i,this.appPages=[{title:"Inbox",url:"/folder/inbox",icon:"mail"},{title:"Outbox",url:"/folder/outbox",icon:"paper-plane"},{title:"Favorites",url:"/folder/favorites",icon:"heart"},{title:"Archived",url:"/folder/archived",icon:"archive"},{title:"Trash",url:"/folder/trash",icon:"trash"},{title:"Spam",url:"/folder/spam",icon:"warning"}],this.labels=["Family","Friends","Notes","Work","Travel","Reminders"],this.message="",this.alertButtons=[{text:"Ok",role:"cancel",handler:()=>{this.setOpen(!1)}}],this.isAlertOpen=!1,this.isToastOpen=!1,this.colorToast="",this.iconToast="",this.isModalOpen=!1,this.isLoading=!1,this.toastMessage="",this.messageModal="",this.uniqueID="",this.callbacks={onGetNotification:a=>{let r=JSON.parse(a.body).descriptionClient;this.message=r,this.setOpen(!0)},onConfirmeRetrait:a=>{let r=JSON.parse(a.body);this.uniqueID=r.uniqueID,this.messageModal=r.message,this.isModalOpen=!0},onGetAgentNotification:a=>{let r=JSON.parse(a.body).descriptionAgent;this.message=r,this.setOpen(!0)}},this.formGroup=new Me({password:new we("",[ve.required])}),rt({mailOutline:Qe,mailSharp:Ye,paperPlaneOutline:Xe,paperPlaneSharp:et,heartOutline:Ze,heartSharp:Je,archiveOutline:qe,archiveSharp:He,trashOutline:tt,trashSharp:nt,warningOutline:ot,warningSharp:it,bookmarkOutline:Ke,bookmarkSharp:$e})}onSubmit(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid){this.isLoading=!0;let n={password:this.formGroup.value.password,uniqueID:this.uniqueID};this.compteService.confirmerRetraitByClient(n).subscribe({next:o=>{this.isLoading=!1,this.message=o.descriptionClient,this.formGroup.reset(),this.isModalOpen=!1,this.setOpen(!0)},error:o=>{this.isLoading=!1;try{this.isModalOpen=!1,this.showToast(o.error.messageClient.contenu,o.error.messageClient.type),this.formGroup.reset()}catch{this.showToast("Verifye koneksyon entenet ou an","error")}}})}}ngOnInit(){this.webSocketService.connectForNotification(this.callbacks)}setOpen(n){this.isAlertOpen=n}showToast(n,o,i){o==="success"?(this.iconToast="checkmark-sharp",this.colorToast="success"):(this.iconToast="close-sharp",this.colorToast="danger"),this.toastMessage=n,this.isToastOpen=!0,setTimeout(()=>{this.closeToast(),i&&i()},5500)}closeToast(){this.isToastOpen=!1}};t.\u0275fac=function(o){return new(o||t)(T(Le),T(st),T(I))},t.\u0275cmp=ne({type:t,selectors:[["app-root"]],decls:6,vars:12,consts:[["id","main-content"],["header","Notifikasyon",3,"didDismiss","isOpen","message","buttons"],["position","top",3,"color","isOpen","message","duration","icon"],["handleBehavior","cycle",3,"isOpen","initialBreakpoint","breakpoints"],[3,"submit","formGroup"],["type","password","label","Modpass","label-placement","floating","helperText","Antre on modpass ki valid","errorText","Modpass lan paka rete vid","placeholder","Antre modpass ou","formControlName","password"],["expand","block","type","submit","disabled","true"],["expand","block","type","submit"]],template:function(o,i){o&1&&(p(0,"ion-app"),_(1,"ion-router-outlet",0),p(2,"ion-alert",1),F("didDismiss",function(){return i.setOpen(!1)}),m(),_(3,"ion-toast",2),p(4,"ion-modal",3),R(5,Ct,12,3,"ng-template"),m()()),o&2&&(f(2),w("isOpen",i.isAlertOpen)("message",i.message)("buttons",i.alertButtons),f(),w("color",i.colorToast)("isOpen",i.isToastOpen)("message",i.toastMessage)("duration",5e3)("icon",i.iconToast),f(),w("isOpen",i.isModalOpen)("initialBreakpoint",.85)("breakpoints",ae(11,gt)))},dependencies:[Se,_e,be,Pe,ye,Ee,Ve,Ne,Ue,Ge,Be,Re,je,Fe,De,xe,ke,ce,Ae,Ie],styles:["ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-item-background, var(--ion-background-color, #fff))}ion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 20px;--padding-bottom: 20px}ion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0}ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:30px}ion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:10px}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-background-color-step-150, #d7d8da)}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:22px;font-weight:600;min-height:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:16px;margin-bottom:18px;color:#757575;min-height:26px}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;border-radius:4px}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .14)}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#616e7e}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 20px}ion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0 0}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:24px;margin-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 50px}ion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#73849a}ion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:8px}ion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:8px}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;color:var(--ion-color-medium-shade)}ion-item.selected[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}"]});let e=t;return e})();var ct=(()=>{let t=class t{constructor(n){this.urlService=n}intercept(n,o){let a=this.urlService.exceptionUrls.some(r=>n.url.includes(r));if(console.log(`hasExceptionUrl: ${a}`),!a){let r=localStorage.getItem("token");r&&(console.log("interceptor"),n=n.clone({setHeaders:{Authorization:`Bearer ${r}`}}))}return o.handle(n)}};t.\u0275fac=function(o){return new(o||t)(l(ze))},t.\u0275prov=h({token:t,factory:t.\u0275fac});let e=t;return e})();var E="Service workers are disabled or not supported by this browser";function Ot(e){return x(()=>q(new Error(e)))}var v=class{serviceWorker;worker;registration;events;constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=Ot(E);else{let n=k(t,"controllerchange").pipe(u(()=>t.controller)),o=x(()=>S(t.controller)),i=H(o,n);this.worker=i.pipe(P(C=>!!C)),this.registration=this.worker.pipe(M(()=>t.getRegistration()));let c=k(t,"message").pipe(u(C=>C.data)).pipe(P(C=>C&&C.type)).pipe($());c.connect(),this.events=c}}postMessage(t,s){return this.worker.pipe(g(1),Z(n=>{n.postMessage(W({action:t},s))})).toPromise().then(()=>{})}postMessageWithOperation(t,s,n){let o=this.waitForOperationCompleted(n),i=this.postMessage(t,s);return Promise.all([i,o]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let s;return typeof t=="string"?s=n=>n.type===t:s=n=>t.includes(n.type),this.events.pipe(P(s))}nextEventOfType(t){return this.eventsOfType(t).pipe(g(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(P(s=>s.nonce===t),g(1),u(s=>{if(s.result!==void 0)return s.result;throw new Error(s.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},vt=(()=>{let t=class t{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new B;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=O,this.notificationClicks=O,this.subscription=O;return}this.messages=this.sw.eventsOfType("PUSH").pipe(u(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(u(i=>i.data)),this.pushManager=this.sw.registration.pipe(u(i=>i.pushManager));let o=this.pushManager.pipe(M(i=>i.getSubscription()));this.subscription=A(o,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(E));let o={userVisibleOnly:!0},i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let r=0;r<i.length;r++)a[r]=i.charCodeAt(r);return o.applicationServerKey=a,this.pushManager.pipe(M(r=>r.subscribe(o)),g(1)).toPromise().then(r=>(this.subscriptionChanges.next(r),r))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(E));let n=o=>{if(o===null)throw new Error("Not subscribed to push notifications.");return o.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(g(1),M(n)).toPromise()}decodeBase64(n){return atob(n)}};b(t,"\u0275fac",function(o){return new(o||t)(l(v))}),b(t,"\u0275prov",h({token:t,factory:t.\u0275fac}));let e=t;return e})(),bt=(()=>{let t=class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=O,this.unrecoverable=O;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(E));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(E));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}};b(t,"\u0275fac",function(o){return new(o||t)(l(v))}),b(t,"\u0275prov",h({token:t,factory:t.\u0275fac}));let e=t;return e})();var lt=new J("");function Pt(e,t,s,n){return()=>{if(!(V(n)&&"serviceWorker"in navigator&&s.enabled!==!1))return;let o=e.get(te),i=e.get(D);o.runOutsideAngular(()=>{let r=navigator.serviceWorker,d=()=>{var c;return(c=r.controller)==null?void 0:c.postMessage({action:"INITIALIZE"})};r.addEventListener("controllerchange",d),i.onDestroy(()=>{r.removeEventListener("controllerchange",d)})});let a;if(typeof s.registrationStrategy=="function")a=s.registrationStrategy();else{let[r,...d]=(s.registrationStrategy||"registerWhenStable:30000").split(":");switch(r){case"registerImmediately":a=S(null);break;case"registerWithDelay":a=mt(+d[0]||0);break;case"registerWhenStable":let c=z(e.get(D).whenStable());a=d[0]?A(c,mt(+d[0])):c;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${s.registrationStrategy}`)}}o.runOutsideAngular(()=>a.pipe(g(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:s.scope}).catch(r=>console.error("Service worker registration failed with:",r))))}}function mt(e){return S(null).pipe(K(e))}function Mt(e,t){return new v(V(t)&&e.enabled!==!1?navigator.serviceWorker:void 0)}var y=class{enabled;scope;registrationStrategy};function dt(e,t={}){return Q([vt,bt,{provide:lt,useValue:e},{provide:y,useValue:t},{provide:v,useFactory:Mt,deps:[y,N]},{provide:oe,useFactory:Pt,deps:[ee,lt,y,N],multi:!0}])}ue(pt,{providers:[{provide:ge,useClass:Te},We(),Ce(at,Oe(fe)),me(de()),{provide:le,useClass:ct,multi:!0},dt("ngsw-worker.js",{enabled:!pe(),registrationStrategy:"registerWhenStable:30000"})]});
